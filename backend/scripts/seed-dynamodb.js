"use strict";
/**
 * Seed DynamoDB Local with Mock Data
 * Populates tables with test data from mock files
 */
Object.defineProperty(exports, "__esModule", { value: true });
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
// Import mock data
const students_1 = require("../test/mocks/students");
const teachers_1 = require("../test/mocks/teachers");
const games_1 = require("../test/mocks/games");
// Configuration for local DynamoDB
const client = new client_dynamodb_1.DynamoDBClient({
    region: process.env.AWS_REGION || 'us-east-1',
    endpoint: process.env.DYNAMODB_ENDPOINT || 'http://localhost:8002',
    credentials: {
        accessKeyId: process.env.AWS_ACCESS_KEY_ID || 'local',
        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || 'local',
    },
});
const docClient = lib_dynamodb_1.DynamoDBDocumentClient.from(client);
const TABLE_NAMES = {
    students: process.env.STUDENTS_TABLE_NAME || 'ho-yu-students',
    teachers: process.env.TEACHERS_TABLE_NAME || 'ho-yu-teachers',
    games: process.env.GAMES_TABLE_NAME || 'ho-yu-games',
};
/**
 * Seed data in batches (DynamoDB batch write limit is 25 items)
 */
async function seedInBatches(tableName, items, label) {
    const batchSize = 25;
    const batches = [];
    for (let i = 0; i < items.length; i += batchSize) {
        batches.push(items.slice(i, i + batchSize));
    }
    console.log(`Seeding ${items.length} ${label} in ${batches.length} batch(es)...`);
    for (let i = 0; i < batches.length; i++) {
        const batch = batches[i];
        const putRequests = batch.map(item => ({
            PutRequest: {
                Item: item,
            },
        }));
        const command = new lib_dynamodb_1.BatchWriteCommand({
            RequestItems: {
                [tableName]: putRequests,
            },
        });
        await docClient.send(command);
        console.log(`  ✓ Batch ${i + 1}/${batches.length} completed (${batch.length} items)`);
    }
    console.log(`✓ Seeded ${items.length} ${label}`);
}
/**
 * Main function to seed all tables
 */
async function seedTables() {
    try {
        console.log('Seeding DynamoDB Local with mock data...\n');
        // Seed teachers
        await seedInBatches(TABLE_NAMES.teachers, teachers_1.mockTeachers, 'teachers');
        console.log('');
        // Seed students
        await seedInBatches(TABLE_NAMES.students, students_1.mockStudents, 'students');
        console.log('');
        // Seed games
        await seedInBatches(TABLE_NAMES.games, games_1.mockGames, 'games');
        console.log('');
        console.log('✓ All data seeded successfully!\n');
        console.log('Summary:');
        console.log(`  - Teachers: ${teachers_1.mockTeachers.length}`);
        console.log(`  - Students: ${students_1.mockStudents.length}`);
        console.log(`  - Games: ${games_1.mockGames.length}`);
        console.log('\nYou can now:');
        console.log('  1. View data in DynamoDB Admin: http://localhost:8001');
        console.log('  2. Test your Lambda functions with local data');
        console.log('  3. Run integration tests\n');
    }
    catch (error) {
        console.error('Error seeding tables:', error);
        throw error;
    }
}
// Run seeding
seedTables()
    .then(() => process.exit(0))
    .catch((error) => {
    console.error('Failed to seed tables:', error);
    process.exit(1);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VlZC1keW5hbW9kYi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlZWQtZHluYW1vZGIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCx3REFBa0Y7QUFDbEYsOERBQTBEO0FBRTFELG1CQUFtQjtBQUNuQixxREFBc0Q7QUFDdEQscURBQXNEO0FBQ3RELCtDQUFnRDtBQUVoRCxtQ0FBbUM7QUFDbkMsTUFBTSxNQUFNLEdBQUcsSUFBSSxnQ0FBYyxDQUFDO0lBQ2hDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxXQUFXO0lBQzdDLFFBQVEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixJQUFJLHVCQUF1QjtJQUNsRSxXQUFXLEVBQUU7UUFDWCxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsSUFBSSxPQUFPO1FBQ3JELGVBQWUsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixJQUFJLE9BQU87S0FDOUQ7Q0FDRixDQUFDLENBQUM7QUFFSCxNQUFNLFNBQVMsR0FBRyxxQ0FBc0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFdEQsTUFBTSxXQUFXLEdBQUc7SUFDbEIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLElBQUksZ0JBQWdCO0lBQzdELFFBQVEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLGdCQUFnQjtJQUM3RCxLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsSUFBSSxhQUFhO0NBQ3JELENBQUM7QUFFRjs7R0FFRztBQUNILEtBQUssVUFBVSxhQUFhLENBQzFCLFNBQWlCLEVBQ2pCLEtBQVUsRUFDVixLQUFhO0lBRWIsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3JCLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUVuQixLQUFLLElBQUksQ0FBQyxHQUFH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QUFDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUM5QyxNQUFNLEtBQUssQ0FBQztJQUNkLENBQUM7QUFDSCxDQUFDO0FBRUQsY0FBYztBQUNkLFVBQVUsRUFBRTtLQUNULElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzNCLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMvQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZWVkIER5bmFtb0RCIExvY2FsIHdpdGggTW9jayBEYXRhXG4gKiBQb3B1bGF0ZXMgdGFibGVzIHdpdGggdGVzdCBkYXRhIGZyb20gbW9jayBmaWxlc1xuICovXG5cbmltcG9ydCB7IER5bmFtb0RCRG9jdW1lbnRDbGllbnQsIEJhdGNoV3JpdGVDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvbGliLWR5bmFtb2RiJztcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50IH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJztcblxuLy8gSW1wb3J0IG1vY2sgZGF0YVxuaW1wb3J0IHsgbW9ja1N0dWRlbnRzIH0gZnJvbSAnLi4vdGVzdC9tb2Nrcy9zdHVkZW50cyc7XG5pbXBvcnQgeyBtb2NrVGVhY2hlcnMgfSBmcm9tICcuLi90ZXN0L21vY2tzL3RlYWNoZXJzJztcbmltcG9ydCB7IG1vY2tHYW1lcyB9IGZyb20gJy4uL3Rlc3QvbW9ja3MvZ2FtZXMnO1xuXG4vLyBDb25maWd1cmF0aW9uIGZvciBsb2NhbCBEeW5hbW9EQlxuY29uc3QgY2xpZW50ID0gbmV3IER5bmFtb0RCQ2xpZW50KHtcbiAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnLFxuICBlbmRwb2ludDogcHJvY2Vzcy5lbnYuRFlOQU1PREJfRU5EUE9JTlQgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMicsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICdsb2NhbCcsXG4gICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgfHwgJ2xvY2FsJyxcbiAgfSxcbn0pO1xuXG5jb25zdCBkb2NDbGllbnQgPSBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LmZyb20oY2xpZW50KTtcblxuY29uc3QgVEFCTEVfTkFNRVMgPSB7XG4gIHN0dWRlbnRzOiBwcm9jZXNzLmVudi5TVFVERU5UU19UQUJMRV9OQU1FIHx8ICdoby15dS1zdHVkZW50cycsXG4gIHRlYWNoZXJzOiBwcm9jZXNzLmVudi5URUFDSEVSU19UQUJMRV9OQU1FIHx8ICdoby15dS10ZWFjaGVycycsXG4gIGdhbWVzOiBwcm9jZXNzLmVudi5HQU1FU19UQUJMRV9OQU1FIHx8ICdoby15dS1nYW1lcycsXG59O1xuXG4vKipcbiAqIFNlZWQgZGF0YSBpbiBiYXRjaGVzIChEeW5hbW9EQiBiYXRjaCB3cml0ZSBsaW1pdCBpcyAyNSBpdGVtcylcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VlZEluQmF0Y2hlczxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gIHRhYmxlTmFtZTogc3RyaW5nLFxuICBpdGVtczogVFtdLFxuICBsYWJlbDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgYmF0Y2hTaXplID0gMjU7XG4gIGNvbnN0IGJhdGNoZXMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICBiYXRjaGVzLnB1c2goaXRlbXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSkpO1xuICB9XG5cbiAgY29uc29sZS5sb2coYFNlZWRpbmcgJHtpdGVtcy5sZW5ndGh9ICR7bGFiZWx9IGluICR7YmF0Y2hlcy5sZW5ndGh9IGJhdGNoKGVzKS4uLmApO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJhdGNoID0gYmF0Y2hlc1tpXTtcbiAgICBjb25zdCBwdXRSZXF1ZXN0cyA9IGJhdGNoLm1hcChpdGVtID0+ICh7XG4gICAgICBQdXRSZXF1ZXN0OiB7XG4gICAgICAgIEl0ZW06IGl0ZW0gYXMgUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgIH0sXG4gICAgfSkpO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBCYXRjaFdyaXRlQ29tbWFuZCh7XG4gICAgICBSZXF1ZXN0SXRlbXM6IHtcbiAgICAgICAgW3RhYmxlTmFtZV06IHB1dFJlcXVlc3RzLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGF3YWl0IGRvY0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgIGNvbnNvbGUubG9nKGAgIOKckyBCYXRjaCAke2kgKyAxfS8ke2JhdGNoZXMubGVuZ3RofSBjb21wbGV0ZWQgKCR7YmF0Y2gubGVuZ3RofSBpdGVtcylgKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGDinJMgU2VlZGVkICR7aXRlbXMubGVuZ3RofSAke2xhYmVsfWApO1xufVxuXG4vKipcbiAqIE1haW4gZnVuY3Rpb24gdG8gc2VlZCBhbGwgdGFibGVzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNlZWRUYWJsZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1NlZWRpbmcgRHluYW1vREIgTG9jYWwgd2l0aCBtb2NrIGRhdGEuLi5cXG4nKTtcblxuICAgIC8vIFNlZWQgdGVhY2hlcnNcbiAgICBhd2FpdCBzZWVkSW5CYXRjaGVzKFRBQkxFX05BTUVTLnRlYWNoZXJzLCBtb2NrVGVhY2hlcnMsICd0ZWFjaGVycycpO1xuICAgIGNvbnNvbGUubG9nKCcnKTtcblxuICAgIC8vIFNlZWQgc3R1ZGVudHNcbiAgICBhd2FpdCBzZWVkSW5CYXRjaGVzKFRBQkxFX05BTUVTLnN0dWRlbnRzLCBtb2NrU3R1ZGVudHMsICdzdHVkZW50cycpO1xuICAgIGNvbnNvbGUubG9nKCcnKTtcblxuICAgIC8vIFNlZWQgZ2FtZXNcbiAgICBhd2FpdCBzZWVkSW5CYXRjaGVzKFRBQkxFX05BTUVTLmdhbWVzLCBtb2NrR2FtZXMsICdnYW1lcycpO1xuICAgIGNvbnNvbGUubG9nKCcnKTtcblxuICAgIGNvbnNvbGUubG9nKCfinJMgQWxsIGRhdGEgc2VlZGVkIHN1Y2Nlc3NmdWxseSFcXG4nKTtcbiAgICBjb25zb2xlLmxvZygnU3VtbWFyeTonKTtcbiAgICBjb25zb2xlLmxvZyhgICAtIFRlYWNoZXJzOiAke21vY2tUZWFjaGVycy5sZW5ndGh9YCk7XG4gICAgY29uc29sZS5sb2coYCAgLSBTdHVkZW50czogJHttb2NrU3R1ZGVudHMubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKGAgIC0gR2FtZXM6ICR7bW9ja0dhbWVzLmxlbmd0aH1gKTtcbiAgICBjb25zb2xlLmxvZygnXFxuWW91IGNhbiBub3c6Jyk7XG4gICAgY29uc29sZS5sb2coJyAgMS4gVmlldyBkYXRhIGluIER5bmFtb0RCIEFkbWluOiBodHRwOi8vbG9jYWxob3N0OjgwMDEnKTtcbiAgICBjb25zb2xlLmxvZygnICAyLiBUZXN0IHlvdXIgTGFtYmRhIGZ1bmN0aW9ucyB3aXRoIGxvY2FsIGRhdGEnKTtcbiAgICBjb25zb2xlLmxvZygnICAzLiBSdW4gaW50ZWdyYXRpb24gdGVzdHNcXG4nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWVkaW5nIHRhYmxlczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gUnVuIHNlZWRpbmdcbnNlZWRUYWJsZXMoKVxuICAudGhlbigoKSA9PiBwcm9jZXNzLmV4aXQoMCkpXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VlZCB0YWJsZXM6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfSk7XG4iXX0=