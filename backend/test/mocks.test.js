"use strict";
/**
 * Mock Data Validation Tests
 * Ensures mock data conforms to the expected schema
 */
Object.defineProperty(exports, "__esModule", { value: true });
const mocks_1 = require("./mocks");
describe('Mock Students Data', () => {
    test('should have exactly 10 student records', () => {
        expect(mocks_1.mockStudents).toHaveLength(10);
    });
    test('all students should have required fields', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student).toHaveProperty('student_id');
            expect(student).toHaveProperty('name_1');
            expect(student).toHaveProperty('name_2');
            expect(student).toHaveProperty('marks');
            expect(student).toHaveProperty('class');
            expect(student).toHaveProperty('class_no');
            expect(student).toHaveProperty('last_login');
            expect(student).toHaveProperty('last_update');
            expect(student).toHaveProperty('teacher_id');
            expect(student).toHaveProperty('password');
        });
    });
    test('student IDs should follow STU### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('student IDs should be unique', () => {
        const ids = mocks_1.mockStudents.map((s) => s.student_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockStudents.length);
    });
    test('marks should be between 0 and 1000', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.marks).toBeGreaterThanOrEqual(0);
            expect(student.marks).toBeLessThanOrEqual(1000);
        });
    });
    test('class should be valid format (e.g., 1A, 2B)', () => {
        const validClasses = ['1A', '1B', '2A', '2B'];
        mocks_1.mockStudents.forEach((student) => {
            expect(validClasses).toContain(student.class);
        });
    });
    test('class_no should be two-digit format', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.class_no).toMatch(/^\d{2}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('last_login and last_update should be valid ISO date strings', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(new Date(student.last_login).toISOString()).toBe(student.last_login);
            expect(new Date(student.last_update).toISOString()).toBe(student.last_update);
        });
    });
    test('passwords should match expected values', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.password).toBe(mocks_1.MOCK_STUDENT_PASSWORD);
        });
    });
});
describe('Mock Teachers Data', () => {
    test('should have exactly 3 teacher records', () => {
        expect(mocks_1.mockTeachers).toHaveLength(3);
    });
    test('all teachers should have required fields', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher).toHaveProperty('teacher_id');
            expect(teacher).toHaveProperty('name');
            expect(teacher).toHaveProperty('password');
            expect(teacher).toHaveProperty('responsible_class');
            expect(teacher).toHaveProperty('last_login');
            expect(teacher).toHaveProperty('is_admin');
        });
    });
    test('teacher IDs should follow TCH### pattern', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('teacher IDs should be unique', () => {
        const ids = mocks_1.mockTeachers.map((t) => t.teacher_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockTeachers.length);
    });
    test('responsible_class should be an array', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(Array.isArray(teacher.responsible_class)).toBe(true);
            expect(teacher.responsible_class.length).toBeGreaterThan(0);
        });
    });
    test('is_admin should be a boolean', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(typeof teacher.is_admin).toBe('boolean');
        });
    });
    test('at least one teacher should be an admin', () => {
        const adminTeachers = mocks_1.mockTeachers.filter((t) => t.is_admin);
        expect(adminTeachers.length).toBeGreaterThan(0);
    });
    test('teacher names should be non-empty strings', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(typeof teacher.name).toBe('string');
            expect(teacher.name.length).toBeGreaterThan(0);
        });
    });
    test('last_login should be valid ISO date string', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(new Date(teacher.last_login).toISOString()).toBe(teacher.last_login);
        });
    });
    test('passwords should match expected values', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            // Check if password is either teacher or admin password
            const validPasswords = [mocks_1.MOCK_TEACHER_PASSWORD, mocks_1.MOCK_ADMIN_PASSWORD];
            expect(validPasswords).toContain(teacher.password);
        });
    });
});
describe('Mock Games Data', () => {
    test('should have exactly 20 game records', () => {
        expect(mocks_1.mockGames).toHaveLength(20);
    });
    test('all games should have required fields', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game).toHaveProperty('game_id');
            expect(game).toHaveProperty('game_name');
            expect(game).toHaveProperty('student_id');
            expect(game).toHaveProperty('subject');
            expect(game).toHaveProperty('difficulty');
            expect(game).toHaveProperty('teacher_id');
            expect(game).toHaveProperty('last_update');
            expect(game).toHaveProperty('scratch_id');
            expect(game).toHaveProperty('scratch_api');
            expect(game).toHaveProperty('accumulated_click');
        });
    });
    test('game IDs should be numeric strings', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.game_id).toMatch(/^\d+$/);
        });
    });
    test('game IDs should be unique', () => {
        const ids = mocks_1.mockGames.map((g) => g.game_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockGames.length);
    });
    test('subject should be one of the valid values', () => {
        const validSubjects = [
            'Chinese Language',
            'English Language',
            'Mathematics',
            'Humanities and Science',
        ];
        mocks_1.mockGames.forEach((game) => {
            expect(validSubjects).toContain(game.subject);
        });
    });
    test('difficulty should be one of the valid values', () => {
        const validDifficulties = ['Beginner', 'Intermediate', 'Advanced'];
        mocks_1.mockGames.forEach((game) => {
            expect(validDifficulties).toContain(game.difficulty);
        });
    });
    test('student_id should follow STU### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('accumulated_click should be non-negative', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.accumulated_click).toBeGreaterThanOrEqual(0);
        });
    });
    test('scratch_id should be numeric string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_id).toMatch(/^\d+$/);
        });
    });
    test('scratch_api should be valid Scratch project URL', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_api).toMatch(/^https:\/\/scratch\.mit\.edu\/projects\/\d+$/);
        });
    });
    test('game_id must match the last segment of scratch_api URL', () => {
        mocks_1.mockGames.forEach((game) => {
            const urlParts = game.scratch_api.split('/');
            const projectId = urlParts[urlParts.length - 1];
            expect(game.game_id).toBe(projectId);
        });
    });
    test('last_update should be valid ISO date string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(new Date(game.last_update).toISOString()).toBe(game.last_update);
        });
    });
    test('all subjects should be represented', () => {
        const subjects = mocks_1.mockGames.map((g) => g.subject);
        expect(subjects).toContain('Chinese Language');
        expect(subjects).toContain('English Language');
        expect(subjects).toContain('Mathematics');
        expect(subjects).toContain('Humanities and Science');
    });
    test('all difficulty levels should be represented', () => {
        const difficulties = mocks_1.mockGames.map((g) => g.difficulty);
        expect(difficulties).toContain('Beginner');
        expect(difficulties).toContain('Intermediate');
        expect(difficulties).toContain('Advanced');
    });
    test('description field should be optional', () => {
        // Some games should have descriptions
        const gamesWithDescription = mocks_1.mockGames.filter((g) => g.description && g.description.length > 0);
        expect(gamesWithDescription.length).toBeGreaterThan(0);
        // Some games may not have descriptions (optional field)
        const gamesWithoutDescription = mocks_1.mockGames.filter((g) => !g.description);
        // It's OK if all have descriptions or some don't - field is optional
        expect(gamesWithDescription.length + gamesWithoutDescription.length).toBe(mocks_1.mockGames.length);
    });
    test('games with description should have non-empty strings', () => {
        mocks_1.mockGames.forEach((game) => {
            if (game.description) {
                expect(typeof game.description).toBe('string');
                expect(game.description.length).toBeGreaterThan(0);
            }
        });
    });
});
describe('Mock Data Relationships', () => {
    test('all student_ids in games should exist in students', () => {
        const studentIds = mocks_1.mockStudents.map((s) => s.student_id);
        mocks_1.mockGames.forEach((game) => {
            expect(studentIds).toContain(game.student_id);
        });
    });
    test('all teacher_ids in students should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockStudents.forEach((student) => {
            expect(teacherIds).toContain(student.teacher_id);
        });
    });
    test('all teacher_ids in games should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockGames.forEach((game) => {
            expect(teacherIds).toContain(game.teacher_id);
        });
    });
    test('each student should have at least one game', () => {
        mocks_1.mockStudents.forEach((student) => {
            const studentGames = mocks_1.mockGames.filter((g) => g.student_id === student.student_id);
            expect(studentGames.length).toBeGreaterThan(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja3MudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1vY2tzLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxtQ0FPaUI7QUFFakIsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1FBQ2xELE1BQU0sQ0FBQyxvQkFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtRQUNwRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDcEQsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUN4QyxNQUFNLEdBQUcsR0FBRyxvQkFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sU0FBUyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1FBQzlDLG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsNkNBQTZDLEVBQUUsR0FBRyxFQUFFO1FBQ3ZELE1BQU0sWUFBWSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDOUMsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUMvQyxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1FBQ25ELG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw2REFBNkQsRUFBRSxHQUFHLEVBQUU7UUFDdkUsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1RSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNoRixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtRQUNsRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLDZCQUFxQixDQUFDLENBQUM7UUFDdkQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1FBQ2pELE1BQU0sQ0FBQyxvQkFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtRQUNwRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQztZQUNwRCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDcEQsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUN4QyxNQUFNLEdBQUcsR0FBRyxvQkFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sU0FBUyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1FBQ2hELG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsT0FBTyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1FBQ25ELE1BQU0sYUFBYSxHQUFHLG9CQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsMkNBQTJDLEVBQUUsR0FBRyxFQUFFO1FBQ3JELG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7UUFDdEQsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtRQUNsRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLHdEQUF3RDtZQUN4RCxNQUFNLGNBQWMsR0FBRyxDQUFDLDZCQUFxQixFQUFFLDJCQUFtQixDQUFDLENBQUM7WUFDcEUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1FBQy9DLE1BQU0sQ0FBQyxpQkFBUyxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtRQUNqRCxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtRQUM5QyxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3JDLE1BQU0sR0FBRyxHQUFHLGlCQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDakQsTUFBTSxTQUFTLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7UUFDckQsTUFBTSxhQUFhLEdBQUc7WUFDcEIsa0JBQWtCO1lBQ2xCLGtCQUFrQjtZQUNsQixhQUFhO1lBQ2Isd0JBQXdCO1NBQ3pCLENBQUM7UUFDRixpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1FBQ3hELE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ25FLGlCQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDOUIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtRQUNuRCxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1FBQ25ELGlCQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDcEQsaUJBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7UUFDL0MsaUJBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtRQUMzRCxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLDhDQUE4QyxDQUFDLENBQUM7UUFDbkYsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7UUFDbEUsaUJBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUM5QixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3QyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDZDQUE2QyxFQUFFLEdBQUcsRUFBRTtRQUN2RCxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzFFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1FBQzlDLE1BQU0sUUFBUSxHQUFHLGlCQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUMvQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUN2RCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7UUFDdkQsTUFBTSxZQUFZLEdBQUcsaUJBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3RCxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM3QyxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7UUFDaEQsc0NBQXNDO1FBQ3RDLE1BQU0sb0JBQW9CLEdBQUcsaUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckcsTUFBTSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV2RCx3REFBd0Q7UUFDeEQsTUFBTSx1QkFBdUIsR0FBRyxpQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0UscUVBQXFFO1FBQ3JFLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLEdBQUcsdUJBQXVCLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUYsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsc0RBQXNELEVBQUUsR0FBRyxFQUFFO1FBQ2hFLGlCQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDOUIsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3JCLE1BQU0sQ0FBQyxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQy9DLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxJQUFJLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1FBQzdELE1BQU0sVUFBVSxHQUFHLG9CQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDOUQsaUJBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUM5QixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLHNEQUFzRCxFQUFFLEdBQUcsRUFBRTtRQUNoRSxNQUFNLFVBQVUsR0FBRyxvQkFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzlELG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7UUFDN0QsTUFBTSxVQUFVLEdBQUcsb0JBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RCxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1FBQ3RELG9CQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBWSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxZQUFZLEdBQUcsaUJBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLEtBQUssT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZGLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTW9jayBEYXRhIFZhbGlkYXRpb24gVGVzdHNcbiAqIEVuc3VyZXMgbW9jayBkYXRhIGNvbmZvcm1zIHRvIHRoZSBleHBlY3RlZCBzY2hlbWFcbiAqL1xuXG5pbXBvcnQge1xuICBtb2NrU3R1ZGVudHMsXG4gIG1vY2tUZWFjaGVycyxcbiAgbW9ja0dhbWVzLFxuICBNT0NLX1NUVURFTlRfUEFTU1dPUkQsXG4gIE1PQ0tfVEVBQ0hFUl9QQVNTV09SRCxcbiAgTU9DS19BRE1JTl9QQVNTV09SRCxcbn0gZnJvbSAnLi9tb2Nrcyc7XG5cbmRlc2NyaWJlKCdNb2NrIFN0dWRlbnRzIERhdGEnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBoYXZlIGV4YWN0bHkgMTAgc3R1ZGVudCByZWNvcmRzJywgKCkgPT4ge1xuICAgIGV4cGVjdChtb2NrU3R1ZGVudHMpLnRvSGF2ZUxlbmd0aCgxMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCBzdHVkZW50cyBzaG91bGQgaGF2ZSByZXF1aXJlZCBmaWVsZHMnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdzdHVkZW50X2lkJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ25hbWVfMScpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCduYW1lXzInKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnbWFya3MnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnY2xhc3MnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnY2xhc3Nfbm8nKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnbGFzdF9sb2dpbicpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdsYXN0X3VwZGF0ZScpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCd0ZWFjaGVyX2lkJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ3Bhc3N3b3JkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3N0dWRlbnQgSURzIHNob3VsZCBmb2xsb3cgU1RVIyMjIHBhdHRlcm4nLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQuc3R1ZGVudF9pZCkudG9NYXRjaCgvXlNUVVxcZHszfSQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc3R1ZGVudCBJRHMgc2hvdWxkIGJlIHVuaXF1ZScsICgpID0+IHtcbiAgICBjb25zdCBpZHMgPSBtb2NrU3R1ZGVudHMubWFwKChzOiBhbnkpID0+IHMuc3R1ZGVudF9pZCk7XG4gICAgY29uc3QgdW5pcXVlSWRzID0gbmV3IFNldChpZHMpO1xuICAgIGV4cGVjdCh1bmlxdWVJZHMuc2l6ZSkudG9CZShtb2NrU3R1ZGVudHMubGVuZ3RoKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWFya3Mgc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgMTAwMCcsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudC5tYXJrcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdHVkZW50Lm1hcmtzKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMDApO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdjbGFzcyBzaG91bGQgYmUgdmFsaWQgZm9ybWF0IChlLmcuLCAxQSwgMkIpJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkQ2xhc3NlcyA9IFsnMUEnLCAnMUInLCAnMkEnLCAnMkInXTtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRDbGFzc2VzKS50b0NvbnRhaW4oc3R1ZGVudC5jbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NsYXNzX25vIHNob3VsZCBiZSB0d28tZGlnaXQgZm9ybWF0JywgKCkgPT4ge1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChzdHVkZW50LmNsYXNzX25vKS50b01hdGNoKC9eXFxkezJ9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyX2lkIHNob3VsZCBmb2xsb3cgVENIIyMjIHBhdHRlcm4nLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQudGVhY2hlcl9pZCkudG9NYXRjaCgvXlRDSFxcZHszfSQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbGFzdF9sb2dpbiBhbmQgbGFzdF91cGRhdGUgc2hvdWxkIGJlIHZhbGlkIElTTyBkYXRlIHN0cmluZ3MnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KG5ldyBEYXRlKHN0dWRlbnQubGFzdF9sb2dpbikudG9JU09TdHJpbmcoKSkudG9CZShzdHVkZW50Lmxhc3RfbG9naW4pO1xuICAgICAgZXhwZWN0KG5ldyBEYXRlKHN0dWRlbnQubGFzdF91cGRhdGUpLnRvSVNPU3RyaW5nKCkpLnRvQmUoc3R1ZGVudC5sYXN0X3VwZGF0ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Bhc3N3b3JkcyBzaG91bGQgbWF0Y2ggZXhwZWN0ZWQgdmFsdWVzJywgKCkgPT4ge1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChzdHVkZW50LnBhc3N3b3JkKS50b0JlKE1PQ0tfU1RVREVOVF9QQVNTV09SRCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdNb2NrIFRlYWNoZXJzIERhdGEnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBoYXZlIGV4YWN0bHkgMyB0ZWFjaGVyIHJlY29yZHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KG1vY2tUZWFjaGVycykudG9IYXZlTGVuZ3RoKDMpO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgdGVhY2hlcnMgc2hvdWxkIGhhdmUgcmVxdWlyZWQgZmllbGRzJywgKCkgPT4ge1xuICAgIG1vY2tUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgndGVhY2hlcl9pZCcpO1xuICAgICAgZXhwZWN0KHRlYWNoZXIpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNpYmxlX2NsYXNzJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ2xhc3RfbG9naW4nKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgnaXNfYWRtaW4nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgndGVhY2hlciBJRHMgc2hvdWxkIGZvbGxvdyBUQ0gjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodGVhY2hlci50ZWFjaGVyX2lkKS50b01hdGNoKC9eVENIXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyIElEcyBzaG91bGQgYmUgdW5pcXVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IG1vY2tUZWFjaGVycy5tYXAoKHQ6IGFueSkgPT4gdC50ZWFjaGVyX2lkKTtcbiAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKG1vY2tUZWFjaGVycy5sZW5ndGgpO1xuICB9KTtcblxuICB0ZXN0KCdyZXNwb25zaWJsZV9jbGFzcyBzaG91bGQgYmUgYW4gYXJyYXknLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodGVhY2hlci5yZXNwb25zaWJsZV9jbGFzcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodGVhY2hlci5yZXNwb25zaWJsZV9jbGFzcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnaXNfYWRtaW4gc2hvdWxkIGJlIGEgYm9vbGVhbicsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIHRlYWNoZXIuaXNfYWRtaW4pLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYXQgbGVhc3Qgb25lIHRlYWNoZXIgc2hvdWxkIGJlIGFuIGFkbWluJywgKCkgPT4ge1xuICAgIGNvbnN0IGFkbWluVGVhY2hlcnMgPSBtb2NrVGVhY2hlcnMuZmlsdGVyKCh0OiBhbnkpID0+IHQuaXNfYWRtaW4pO1xuICAgIGV4cGVjdChhZG1pblRlYWNoZXJzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyIG5hbWVzIHNob3VsZCBiZSBub24tZW1wdHkgc3RyaW5ncycsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIHRlYWNoZXIubmFtZSkudG9CZSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QodGVhY2hlci5uYW1lLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdsYXN0X2xvZ2luIHNob3VsZCBiZSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KG5ldyBEYXRlKHRlYWNoZXIubGFzdF9sb2dpbikudG9JU09TdHJpbmcoKSkudG9CZSh0ZWFjaGVyLmxhc3RfbG9naW4pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdwYXNzd29yZHMgc2hvdWxkIG1hdGNoIGV4cGVjdGVkIHZhbHVlcycsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBpcyBlaXRoZXIgdGVhY2hlciBvciBhZG1pbiBwYXNzd29yZFxuICAgICAgY29uc3QgdmFsaWRQYXNzd29yZHMgPSBbTU9DS19URUFDSEVSX1BBU1NXT1JELCBNT0NLX0FETUlOX1BBU1NXT1JEXTtcbiAgICAgIGV4cGVjdCh2YWxpZFBhc3N3b3JkcykudG9Db250YWluKHRlYWNoZXIucGFzc3dvcmQpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTW9jayBHYW1lcyBEYXRhJywgKCkgPT4ge1xuICB0ZXN0KCdzaG91bGQgaGF2ZSBleGFjdGx5IDIwIGdhbWUgcmVjb3JkcycsICgpID0+IHtcbiAgICBleHBlY3QobW9ja0dhbWVzKS50b0hhdmVMZW5ndGgoMjApO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgZ2FtZXMgc2hvdWxkIGhhdmUgcmVxdWlyZWQgZmllbGRzJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnZ2FtZV9pZCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdnYW1lX25hbWUnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnc3R1ZGVudF9pZCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdzdWJqZWN0Jyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ2RpZmZpY3VsdHknKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgndGVhY2hlcl9pZCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdsYXN0X3VwZGF0ZScpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdzY3JhdGNoX2lkJyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ3NjcmF0Y2hfYXBpJyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ2FjY3VtdWxhdGVkX2NsaWNrJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2dhbWUgSURzIHNob3VsZCBiZSBudW1lcmljIHN0cmluZ3MnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuZ2FtZV9pZCkudG9NYXRjaCgvXlxcZCskLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2dhbWUgSURzIHNob3VsZCBiZSB1bmlxdWUnLCAoKSA9PiB7XG4gICAgY29uc3QgaWRzID0gbW9ja0dhbWVzLm1hcCgoZzogYW55KSA9PiBnLmdhbWVfaWQpO1xuICAgIGNvbnN0IHVuaXF1ZUlkcyA9IG5ldyBTZXQoaWRzKTtcbiAgICBleHBlY3QodW5pcXVlSWRzLnNpemUpLnRvQmUobW9ja0dhbWVzLmxlbmd0aCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3N1YmplY3Qgc2hvdWxkIGJlIG9uZSBvZiB0aGUgdmFsaWQgdmFsdWVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkU3ViamVjdHMgPSBbXG4gICAgICAnQ2hpbmVzZSBMYW5ndWFnZScsXG4gICAgICAnRW5nbGlzaCBMYW5ndWFnZScsXG4gICAgICAnTWF0aGVtYXRpY3MnLFxuICAgICAgJ0h1bWFuaXRpZXMgYW5kIFNjaWVuY2UnLFxuICAgIF07XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkU3ViamVjdHMpLnRvQ29udGFpbihnYW1lLnN1YmplY3QpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdkaWZmaWN1bHR5IHNob3VsZCBiZSBvbmUgb2YgdGhlIHZhbGlkIHZhbHVlcycsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZERpZmZpY3VsdGllcyA9IFsnQmVnaW5uZXInLCAnSW50ZXJtZWRpYXRlJywgJ0FkdmFuY2VkJ107XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkRGlmZmljdWx0aWVzKS50b0NvbnRhaW4oZ2FtZS5kaWZmaWN1bHR5KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc3R1ZGVudF9pZCBzaG91bGQgZm9sbG93IFNUVSMjIyBwYXR0ZXJuJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLnN0dWRlbnRfaWQpLnRvTWF0Y2goL15TVFVcXGR7M30kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RlYWNoZXJfaWQgc2hvdWxkIGZvbGxvdyBUQ0gjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QoZ2FtZS50ZWFjaGVyX2lkKS50b01hdGNoKC9eVENIXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhY2N1bXVsYXRlZF9jbGljayBzaG91bGQgYmUgbm9uLW5lZ2F0aXZlJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLmFjY3VtdWxhdGVkX2NsaWNrKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzY3JhdGNoX2lkIHNob3VsZCBiZSBudW1lcmljIHN0cmluZycsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QoZ2FtZS5zY3JhdGNoX2lkKS50b01hdGNoKC9eXFxkKyQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyYXRjaF9hcGkgc2hvdWxkIGJlIHZhbGlkIFNjcmF0Y2ggcHJvamVjdCBVUkwnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuc2NyYXRjaF9hcGkpLnRvTWF0Y2goL15odHRwczpcXC9cXC9zY3JhdGNoXFwubWl0XFwuZWR1XFwvcHJvamVjdHNcXC9cXGQrJC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdnYW1lX2lkIG11c3QgbWF0Y2ggdGhlIGxhc3Qgc2VnbWVudCBvZiBzY3JhdGNoX2FwaSBVUkwnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgdXJsUGFydHMgPSBnYW1lLnNjcmF0Y2hfYXBpLnNwbGl0KCcvJyk7XG4gICAgICBjb25zdCBwcm9qZWN0SWQgPSB1cmxQYXJ0c1t1cmxQYXJ0cy5sZW5ndGggLSAxXTtcbiAgICAgIGV4cGVjdChnYW1lLmdhbWVfaWQpLnRvQmUocHJvamVjdElkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbGFzdF91cGRhdGUgc2hvdWxkIGJlIHZhbGlkIElTTyBkYXRlIHN0cmluZycsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QobmV3IERhdGUoZ2FtZS5sYXN0X3VwZGF0ZSkudG9JU09TdHJpbmcoKSkudG9CZShnYW1lLmxhc3RfdXBkYXRlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIHN1YmplY3RzIHNob3VsZCBiZSByZXByZXNlbnRlZCcsICgpID0+IHtcbiAgICBjb25zdCBzdWJqZWN0cyA9IG1vY2tHYW1lcy5tYXAoKGc6IGFueSkgPT4gZy5zdWJqZWN0KTtcbiAgICBleHBlY3Qoc3ViamVjdHMpLnRvQ29udGFpbignQ2hpbmVzZSBMYW5ndWFnZScpO1xuICAgIGV4cGVjdChzdWJqZWN0cykudG9Db250YWluKCdFbmdsaXNoIExhbmd1YWdlJyk7XG4gICAgZXhwZWN0KHN1YmplY3RzKS50b0NvbnRhaW4oJ01hdGhlbWF0aWNzJyk7XG4gICAgZXhwZWN0KHN1YmplY3RzKS50b0NvbnRhaW4oJ0h1bWFuaXRpZXMgYW5kIFNjaWVuY2UnKTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIGRpZmZpY3VsdHkgbGV2ZWxzIHNob3VsZCBiZSByZXByZXNlbnRlZCcsICgpID0+IHtcbiAgICBjb25zdCBkaWZmaWN1bHRpZXMgPSBtb2NrR2FtZXMubWFwKChnOiBhbnkpID0+IGcuZGlmZmljdWx0eSk7XG4gICAgZXhwZWN0KGRpZmZpY3VsdGllcykudG9Db250YWluKCdCZWdpbm5lcicpO1xuICAgIGV4cGVjdChkaWZmaWN1bHRpZXMpLnRvQ29udGFpbignSW50ZXJtZWRpYXRlJyk7XG4gICAgZXhwZWN0KGRpZmZpY3VsdGllcykudG9Db250YWluKCdBZHZhbmNlZCcpO1xuICB9KTtcblxuICB0ZXN0KCdkZXNjcmlwdGlvbiBmaWVsZCBzaG91bGQgYmUgb3B0aW9uYWwnLCAoKSA9PiB7XG4gICAgLy8gU29tZSBnYW1lcyBzaG91bGQgaGF2ZSBkZXNjcmlwdGlvbnNcbiAgICBjb25zdCBnYW1lc1dpdGhEZXNjcmlwdGlvbiA9IG1vY2tHYW1lcy5maWx0ZXIoKGc6IGFueSkgPT4gZy5kZXNjcmlwdGlvbiAmJiBnLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDApO1xuICAgIGV4cGVjdChnYW1lc1dpdGhEZXNjcmlwdGlvbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBcbiAgICAvLyBTb21lIGdhbWVzIG1heSBub3QgaGF2ZSBkZXNjcmlwdGlvbnMgKG9wdGlvbmFsIGZpZWxkKVxuICAgIGNvbnN0IGdhbWVzV2l0aG91dERlc2NyaXB0aW9uID0gbW9ja0dhbWVzLmZpbHRlcigoZzogYW55KSA9PiAhZy5kZXNjcmlwdGlvbik7XG4gICAgLy8gSXQncyBPSyBpZiBhbGwgaGF2ZSBkZXNjcmlwdGlvbnMgb3Igc29tZSBkb24ndCAtIGZpZWxkIGlzIG9wdGlvbmFsXG4gICAgZXhwZWN0KGdhbWVzV2l0aERlc2NyaXB0aW9uLmxlbmd0aCArIGdhbWVzV2l0aG91dERlc2NyaXB0aW9uLmxlbmd0aCkudG9CZShtb2NrR2FtZXMubGVuZ3RoKTtcbiAgfSk7XG5cbiAgdGVzdCgnZ2FtZXMgd2l0aCBkZXNjcmlwdGlvbiBzaG91bGQgaGF2ZSBub24tZW1wdHkgc3RyaW5ncycsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBpZiAoZ2FtZS5kZXNjcmlwdGlvbikge1xuICAgICAgICBleHBlY3QodHlwZW9mIGdhbWUuZGVzY3JpcHRpb24pLnRvQmUoJ3N0cmluZycpO1xuICAgICAgICBleHBlY3QoZ2FtZS5kZXNjcmlwdGlvbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vY2sgRGF0YSBSZWxhdGlvbnNoaXBzJywgKCkgPT4ge1xuICB0ZXN0KCdhbGwgc3R1ZGVudF9pZHMgaW4gZ2FtZXMgc2hvdWxkIGV4aXN0IGluIHN0dWRlbnRzJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0dWRlbnRJZHMgPSBtb2NrU3R1ZGVudHMubWFwKChzOiBhbnkpID0+IHMuc3R1ZGVudF9pZCk7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnRJZHMpLnRvQ29udGFpbihnYW1lLnN0dWRlbnRfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgdGVhY2hlcl9pZHMgaW4gc3R1ZGVudHMgc2hvdWxkIGV4aXN0IGluIHRlYWNoZXJzJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlYWNoZXJJZHMgPSBtb2NrVGVhY2hlcnMubWFwKCh0OiBhbnkpID0+IHQudGVhY2hlcl9pZCk7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXJJZHMpLnRvQ29udGFpbihzdHVkZW50LnRlYWNoZXJfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgdGVhY2hlcl9pZHMgaW4gZ2FtZXMgc2hvdWxkIGV4aXN0IGluIHRlYWNoZXJzJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlYWNoZXJJZHMgPSBtb2NrVGVhY2hlcnMubWFwKCh0OiBhbnkpID0+IHQudGVhY2hlcl9pZCk7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXJJZHMpLnRvQ29udGFpbihnYW1lLnRlYWNoZXJfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdlYWNoIHN0dWRlbnQgc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGdhbWUnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgc3R1ZGVudEdhbWVzID0gbW9ja0dhbWVzLmZpbHRlcigoZzogYW55KSA9PiBnLnN0dWRlbnRfaWQgPT09IHN0dWRlbnQuc3R1ZGVudF9pZCk7XG4gICAgICBleHBlY3Qoc3R1ZGVudEdhbWVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19