"use strict";
/**
 * Mock Data Validation Tests
 * Ensures mock data conforms to the expected schema
 */
Object.defineProperty(exports, "__esModule", { value: true });
const mocks_1 = require("./mocks");
describe('Mock Students Data', () => {
    test('should have exactly 10 student records', () => {
        expect(mocks_1.mockStudents).toHaveLength(10);
    });
    test('all students should have required fields', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student).toHaveProperty('student_id');
            expect(student).toHaveProperty('name_1');
            expect(student).toHaveProperty('name_2');
            expect(student).toHaveProperty('marks');
            expect(student).toHaveProperty('class');
            expect(student).toHaveProperty('class_no');
            expect(student).toHaveProperty('last_login');
            expect(student).toHaveProperty('last_update');
            expect(student).toHaveProperty('teacher_id');
            expect(student).toHaveProperty('password');
        });
    });
    test('student IDs should follow STU### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('student IDs should be unique', () => {
        const ids = mocks_1.mockStudents.map((s) => s.student_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockStudents.length);
    });
    test('marks should be between 0 and 1000', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.marks).toBeGreaterThanOrEqual(0);
            expect(student.marks).toBeLessThanOrEqual(1000);
        });
    });
    test('class should be valid format (e.g., 1A, 2B)', () => {
        const validClasses = ['1A', '1B', '2A', '2B'];
        mocks_1.mockStudents.forEach((student) => {
            expect(validClasses).toContain(student.class);
        });
    });
    test('class_no should be two-digit format', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.class_no).toMatch(/^\d{2}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('last_login and last_update should be valid ISO date strings', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(new Date(student.last_login).toISOString()).toBe(student.last_login);
            expect(new Date(student.last_update).toISOString()).toBe(student.last_update);
        });
    });
    test('passwords should match expected values', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.password).toBe(mocks_1.MOCK_STUDENT_PASSWORD);
        });
    });
});
describe('Mock Teachers Data', () => {
    test('should have exactly 3 teacher records', () => {
        expect(mocks_1.mockTeachers).toHaveLength(3);
    });
    test('all teachers should have required fields', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher).toHaveProperty('teacher_id');
            expect(teacher).toHaveProperty('name');
            expect(teacher).toHaveProperty('password');
            expect(teacher).toHaveProperty('responsible_class');
            expect(teacher).toHaveProperty('last_login');
            expect(teacher).toHaveProperty('is_admin');
        });
    });
    test('teacher IDs should follow TCH### pattern', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('teacher IDs should be unique', () => {
        const ids = mocks_1.mockTeachers.map((t) => t.teacher_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockTeachers.length);
    });
    test('responsible_class should be an array', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(Array.isArray(teacher.responsible_class)).toBe(true);
            expect(teacher.responsible_class.length).toBeGreaterThan(0);
        });
    });
    test('is_admin should be a boolean', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(typeof teacher.is_admin).toBe('boolean');
        });
    });
    test('at least one teacher should be an admin', () => {
        const adminTeachers = mocks_1.mockTeachers.filter((t) => t.is_admin);
        expect(adminTeachers.length).toBeGreaterThan(0);
    });
    test('teacher names should be non-empty strings', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(typeof teacher.name).toBe('string');
            expect(teacher.name.length).toBeGreaterThan(0);
        });
    });
    test('last_login should be valid ISO date string', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(new Date(teacher.last_login).toISOString()).toBe(teacher.last_login);
        });
    });
    test('passwords should match expected values', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            // Check if password is either teacher or admin password
            const validPasswords = [mocks_1.MOCK_TEACHER_PASSWORD, mocks_1.MOCK_ADMIN_PASSWORD];
            expect(validPasswords).toContain(teacher.password);
        });
    });
});
describe('Mock Games Data', () => {
    test('should have exactly 20 game records', () => {
        expect(mocks_1.mockGames).toHaveLength(20);
    });
    test('all games should have required fields', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game).toHaveProperty('scratch_game_id');
            expect(game).toHaveProperty('game_name');
            expect(game).toHaveProperty('student_id');
            expect(game).toHaveProperty('subject');
            expect(game).toHaveProperty('difficulty');
            expect(game).toHaveProperty('teacher_id');
            expect(game).toHaveProperty('last_update');
            expect(game).toHaveProperty('scratch_id');
            expect(game).toHaveProperty('accumulated_click');
        });
    });
    test('game IDs should be numeric strings', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_game_id).toMatch(/^\d+$/);
        });
    });
    test('game IDs should be unique', () => {
        const ids = mocks_1.mockGames.map((g) => g.scratch_game_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockGames.length);
    });
    test('subject should be one of the valid values', () => {
        const validSubjects = [
            'Chinese Language',
            'English Language',
            'Mathematics',
            'Humanities and Science',
        ];
        mocks_1.mockGames.forEach((game) => {
            expect(validSubjects).toContain(game.subject);
        });
    });
    test('difficulty should be one of the valid values', () => {
        const validDifficulties = ['Beginner', 'Intermediate', 'Advanced'];
        mocks_1.mockGames.forEach((game) => {
            expect(validDifficulties).toContain(game.difficulty);
        });
    });
    test('student_id should follow STU### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('accumulated_click should be non-negative', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.accumulated_click).toBeGreaterThanOrEqual(0);
        });
    });
    test('scratch_id should be numeric string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_id).toMatch(/^\d+$/);
        });
    });
    test('scratch_game_id should be numeric string representing Scratch project ID', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_game_id).toMatch(/^\d+$/);
        });
    });
    test('last_update should be valid ISO date string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(new Date(game.last_update).toISOString()).toBe(game.last_update);
        });
    });
    test('all subjects should be represented', () => {
        const subjects = mocks_1.mockGames.map((g) => g.subject);
        expect(subjects).toContain('Chinese Language');
        expect(subjects).toContain('English Language');
        expect(subjects).toContain('Mathematics');
        expect(subjects).toContain('Humanities and Science');
    });
    test('all difficulty levels should be represented', () => {
        const difficulties = mocks_1.mockGames.map((g) => g.difficulty);
        expect(difficulties).toContain('Beginner');
        expect(difficulties).toContain('Intermediate');
        expect(difficulties).toContain('Advanced');
    });
});
describe('Mock Data Relationships', () => {
    test('all student_ids in games should exist in students', () => {
        const studentIds = mocks_1.mockStudents.map((s) => s.student_id);
        mocks_1.mockGames.forEach((game) => {
            expect(studentIds).toContain(game.student_id);
        });
    });
    test('all teacher_ids in students should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockStudents.forEach((student) => {
            expect(teacherIds).toContain(student.teacher_id);
        });
    });
    test('all teacher_ids in games should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockGames.forEach((game) => {
            expect(teacherIds).toContain(game.teacher_id);
        });
    });
    test('each student should have at least one game', () => {
        mocks_1.mockStudents.forEach((student) => {
            const studentGames = mocks_1.mockGames.filter((g) => g.student_id === student.student_id);
            expect(studentGames.length).toBeGreaterThan(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja3MudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1vY2tzLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxtQ0FPaUI7QUFFakIsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1FBQ2xELE1BQU0sQ0FBQyxvQkFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtRQUNwRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FB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Q0FBQyxDQUFDO1FBQzlELGlCQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDOUIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7UUFDdEQsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLFlBQVksR0FBRyxpQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsS0FBSyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdkYsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2NrIERhdGEgVmFsaWRhdGlvbiBUZXN0c1xuICogRW5zdXJlcyBtb2NrIGRhdGEgY29uZm9ybXMgdG8gdGhlIGV4cGVjdGVkIHNjaGVtYVxuICovXG5cbmltcG9ydCB7XG4gIG1vY2tTdHVkZW50cyxcbiAgbW9ja1RlYWNoZXJzLFxuICBtb2NrR2FtZXMsXG4gIE1PQ0tfU1RVREVOVF9QQVNTV09SRCxcbiAgTU9DS19URUFDSEVSX1BBU1NXT1JELFxuICBNT0NLX0FETUlOX1BBU1NXT1JELFxufSBmcm9tICcuL21vY2tzJztcblxuZGVzY3JpYmUoJ01vY2sgU3R1ZGVudHMgRGF0YScsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGhhdmUgZXhhY3RseSAxMCBzdHVkZW50IHJlY29yZHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KG1vY2tTdHVkZW50cykudG9IYXZlTGVuZ3RoKDEwKTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIHN0dWRlbnRzIHNob3VsZCBoYXZlIHJlcXVpcmVkIGZpZWxkcycsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ3N0dWRlbnRfaWQnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnbmFtZV8xJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ25hbWVfMicpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdtYXJrcycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdjbGFzcycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdjbGFzc19ubycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdsYXN0X2xvZ2luJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ2xhc3RfdXBkYXRlJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ3RlYWNoZXJfaWQnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgncGFzc3dvcmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc3R1ZGVudCBJRHMgc2hvdWxkIGZvbGxvdyBTVFUjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudC5zdHVkZW50X2lkKS50b01hdGNoKC9eU1RVXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzdHVkZW50IElEcyBzaG91bGQgYmUgdW5pcXVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IG1vY2tTdHVkZW50cy5tYXAoKHM6IGFueSkgPT4gcy5zdHVkZW50X2lkKTtcbiAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKG1vY2tTdHVkZW50cy5sZW5ndGgpO1xuICB9KTtcblxuICB0ZXN0KCdtYXJrcyBzaG91bGQgYmUgYmV0d2VlbiAwIGFuZCAxMDAwJywgKCkgPT4ge1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChzdHVkZW50Lm1hcmtzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0dWRlbnQubWFya3MpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NsYXNzIHNob3VsZCBiZSB2YWxpZCBmb3JtYXQgKGUuZy4sIDFBLCAyQiknLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRDbGFzc2VzID0gWycxQScsICcxQicsICcyQScsICcyQiddO1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZENsYXNzZXMpLnRvQ29udGFpbihzdHVkZW50LmNsYXNzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnY2xhc3Nfbm8gc2hvdWxkIGJlIHR3by1kaWdpdCBmb3JtYXQnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQuY2xhc3Nfbm8pLnRvTWF0Y2goL15cXGR7Mn0kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RlYWNoZXJfaWQgc2hvdWxkIGZvbGxvdyBUQ0gjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudC50ZWFjaGVyX2lkKS50b01hdGNoKC9eVENIXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdsYXN0X2xvZ2luIGFuZCBsYXN0X3VwZGF0ZSBzaG91bGQgYmUgdmFsaWQgSVNPIGRhdGUgc3RyaW5ncycsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3QobmV3IERhdGUoc3R1ZGVudC5sYXN0X2xvZ2luKS50b0lTT1N0cmluZygpKS50b0JlKHN0dWRlbnQubGFzdF9sb2dpbik7XG4gICAgICBleHBlY3QobmV3IERhdGUoc3R1ZGVudC5sYXN0X3VwZGF0ZSkudG9JU09TdHJpbmcoKSkudG9CZShzdHVkZW50Lmxhc3RfdXBkYXRlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgncGFzc3dvcmRzIHNob3VsZCBtYXRjaCBleHBlY3RlZCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQucGFzc3dvcmQpLnRvQmUoTU9DS19TVFVERU5UX1BBU1NXT1JEKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vY2sgVGVhY2hlcnMgRGF0YScsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGhhdmUgZXhhY3RseSAzIHRlYWNoZXIgcmVjb3JkcycsICgpID0+IHtcbiAgICBleHBlY3QobW9ja1RlYWNoZXJzKS50b0hhdmVMZW5ndGgoMyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCB0ZWFjaGVycyBzaG91bGQgaGF2ZSByZXF1aXJlZCBmaWVsZHMnLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXIpLnRvSGF2ZVByb3BlcnR5KCd0ZWFjaGVyX2lkJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ25hbWUnKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgncGFzc3dvcmQnKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgncmVzcG9uc2libGVfY2xhc3MnKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgnbGFzdF9sb2dpbicpO1xuICAgICAgZXhwZWN0KHRlYWNoZXIpLnRvSGF2ZVByb3BlcnR5KCdpc19hZG1pbicpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyIElEcyBzaG91bGQgZm9sbG93IFRDSCMjIyBwYXR0ZXJuJywgKCkgPT4ge1xuICAgIG1vY2tUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyLnRlYWNoZXJfaWQpLnRvTWF0Y2goL15UQ0hcXGR7M30kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RlYWNoZXIgSURzIHNob3VsZCBiZSB1bmlxdWUnLCAoKSA9PiB7XG4gICAgY29uc3QgaWRzID0gbW9ja1RlYWNoZXJzLm1hcCgodDogYW55KSA9PiB0LnRlYWNoZXJfaWQpO1xuICAgIGNvbnN0IHVuaXF1ZUlkcyA9IG5ldyBTZXQoaWRzKTtcbiAgICBleHBlY3QodW5pcXVlSWRzLnNpemUpLnRvQmUobW9ja1RlYWNoZXJzLmxlbmd0aCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Jlc3BvbnNpYmxlX2NsYXNzIHNob3VsZCBiZSBhbiBhcnJheScsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh0ZWFjaGVyLnJlc3BvbnNpYmxlX2NsYXNzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyLnJlc3BvbnNpYmxlX2NsYXNzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdpc19hZG1pbiBzaG91bGQgYmUgYSBib29sZWFuJywgKCkgPT4ge1xuICAgIG1vY2tUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdGVhY2hlci5pc19hZG1pbikudG9CZSgnYm9vbGVhbicpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhdCBsZWFzdCBvbmUgdGVhY2hlciBzaG91bGQgYmUgYW4gYWRtaW4nLCAoKSA9PiB7XG4gICAgY29uc3QgYWRtaW5UZWFjaGVycyA9IG1vY2tUZWFjaGVycy5maWx0ZXIoKHQ6IGFueSkgPT4gdC5pc19hZG1pbik7XG4gICAgZXhwZWN0KGFkbWluVGVhY2hlcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RlYWNoZXIgbmFtZXMgc2hvdWxkIGJlIG5vbi1lbXB0eSBzdHJpbmdzJywgKCkgPT4ge1xuICAgIG1vY2tUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdGVhY2hlci5uYW1lKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyLm5hbWUubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2xhc3RfbG9naW4gc2hvdWxkIGJlIHZhbGlkIElTTyBkYXRlIHN0cmluZycsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QobmV3IERhdGUodGVhY2hlci5sYXN0X2xvZ2luKS50b0lTT1N0cmluZygpKS50b0JlKHRlYWNoZXIubGFzdF9sb2dpbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Bhc3N3b3JkcyBzaG91bGQgbWF0Y2ggZXhwZWN0ZWQgdmFsdWVzJywgKCkgPT4ge1xuICAgIG1vY2tUZWFjaGVycy5mb3JFYWNoKCh0ZWFjaGVyOiBhbnkpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIHBhc3N3b3JkIGlzIGVpdGhlciB0ZWFjaGVyIG9yIGFkbWluIHBhc3N3b3JkXG4gICAgICBjb25zdCB2YWxpZFBhc3N3b3JkcyA9IFtNT0NLX1RFQUNIRVJfUEFTU1dPUkQsIE1PQ0tfQURNSU5fUEFTU1dPUkRdO1xuICAgICAgZXhwZWN0KHZhbGlkUGFzc3dvcmRzKS50b0NvbnRhaW4odGVhY2hlci5wYXNzd29yZCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdNb2NrIEdhbWVzIERhdGEnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBoYXZlIGV4YWN0bHkgMjAgZ2FtZSByZWNvcmRzJywgKCkgPT4ge1xuICAgIGV4cGVjdChtb2NrR2FtZXMpLnRvSGF2ZUxlbmd0aCgyMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCBnYW1lcyBzaG91bGQgaGF2ZSByZXF1aXJlZCBmaWVsZHMnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdzY3JhdGNoX2dhbWVfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnZ2FtZV9uYW1lJyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ3N0dWRlbnRfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnc3ViamVjdCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdkaWZmaWN1bHR5Jyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ3RlYWNoZXJfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnbGFzdF91cGRhdGUnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnc2NyYXRjaF9pZCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdhY2N1bXVsYXRlZF9jbGljaycpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdnYW1lIElEcyBzaG91bGQgYmUgbnVtZXJpYyBzdHJpbmdzJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLnNjcmF0Y2hfZ2FtZV9pZCkudG9NYXRjaCgvXlxcZCskLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2dhbWUgSURzIHNob3VsZCBiZSB1bmlxdWUnLCAoKSA9PiB7XG4gICAgY29uc3QgaWRzID0gbW9ja0dhbWVzLm1hcCgoZzogYW55KSA9PiBnLnNjcmF0Y2hfZ2FtZV9pZCk7XG4gICAgY29uc3QgdW5pcXVlSWRzID0gbmV3IFNldChpZHMpO1xuICAgIGV4cGVjdCh1bmlxdWVJZHMuc2l6ZSkudG9CZShtb2NrR2FtZXMubGVuZ3RoKTtcbiAgfSk7XG5cbiAgdGVzdCgnc3ViamVjdCBzaG91bGQgYmUgb25lIG9mIHRoZSB2YWxpZCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRTdWJqZWN0cyA9IFtcbiAgICAgICdDaGluZXNlIExhbmd1YWdlJyxcbiAgICAgICdFbmdsaXNoIExhbmd1YWdlJyxcbiAgICAgICdNYXRoZW1hdGljcycsXG4gICAgICAnSHVtYW5pdGllcyBhbmQgU2NpZW5jZScsXG4gICAgXTtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRTdWJqZWN0cykudG9Db250YWluKGdhbWUuc3ViamVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2RpZmZpY3VsdHkgc2hvdWxkIGJlIG9uZSBvZiB0aGUgdmFsaWQgdmFsdWVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkRGlmZmljdWx0aWVzID0gWydCZWdpbm5lcicsICdJbnRlcm1lZGlhdGUnLCAnQWR2YW5jZWQnXTtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QodmFsaWREaWZmaWN1bHRpZXMpLnRvQ29udGFpbihnYW1lLmRpZmZpY3VsdHkpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzdHVkZW50X2lkIHNob3VsZCBmb2xsb3cgU1RVIyMjIHBhdHRlcm4nLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuc3R1ZGVudF9pZCkudG9NYXRjaCgvXlNUVVxcZHszfSQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgndGVhY2hlcl9pZCBzaG91bGQgZm9sbG93IFRDSCMjIyBwYXR0ZXJuJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLnRlYWNoZXJfaWQpLnRvTWF0Y2goL15UQ0hcXGR7M30kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FjY3VtdWxhdGVkX2NsaWNrIHNob3VsZCBiZSBub24tbmVnYXRpdmUnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuYWNjdW11bGF0ZWRfY2xpY2spLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmF0Y2hfaWQgc2hvdWxkIGJlIG51bWVyaWMgc3RyaW5nJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLnNjcmF0Y2hfaWQpLnRvTWF0Y2goL15cXGQrJC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzY3JhdGNoX2dhbWVfaWQgc2hvdWxkIGJlIG51bWVyaWMgc3RyaW5nIHJlcHJlc2VudGluZyBTY3JhdGNoIHByb2plY3QgSUQnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuc2NyYXRjaF9nYW1lX2lkKS50b01hdGNoKC9eXFxkKyQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbGFzdF91cGRhdGUgc2hvdWxkIGJlIHZhbGlkIElTTyBkYXRlIHN0cmluZycsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QobmV3IERhdGUoZ2FtZS5sYXN0X3VwZGF0ZSkudG9JU09TdHJpbmcoKSkudG9CZShnYW1lLmxhc3RfdXBkYXRlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIHN1YmplY3RzIHNob3VsZCBiZSByZXByZXNlbnRlZCcsICgpID0+IHtcbiAgICBjb25zdCBzdWJqZWN0cyA9IG1vY2tHYW1lcy5tYXAoKGc6IGFueSkgPT4gZy5zdWJqZWN0KTtcbiAgICBleHBlY3Qoc3ViamVjdHMpLnRvQ29udGFpbignQ2hpbmVzZSBMYW5ndWFnZScpO1xuICAgIGV4cGVjdChzdWJqZWN0cykudG9Db250YWluKCdFbmdsaXNoIExhbmd1YWdlJyk7XG4gICAgZXhwZWN0KHN1YmplY3RzKS50b0NvbnRhaW4oJ01hdGhlbWF0aWNzJyk7XG4gICAgZXhwZWN0KHN1YmplY3RzKS50b0NvbnRhaW4oJ0h1bWFuaXRpZXMgYW5kIFNjaWVuY2UnKTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIGRpZmZpY3VsdHkgbGV2ZWxzIHNob3VsZCBiZSByZXByZXNlbnRlZCcsICgpID0+IHtcbiAgICBjb25zdCBkaWZmaWN1bHRpZXMgPSBtb2NrR2FtZXMubWFwKChnOiBhbnkpID0+IGcuZGlmZmljdWx0eSk7XG4gICAgZXhwZWN0KGRpZmZpY3VsdGllcykudG9Db250YWluKCdCZWdpbm5lcicpO1xuICAgIGV4cGVjdChkaWZmaWN1bHRpZXMpLnRvQ29udGFpbignSW50ZXJtZWRpYXRlJyk7XG4gICAgZXhwZWN0KGRpZmZpY3VsdGllcykudG9Db250YWluKCdBZHZhbmNlZCcpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTW9jayBEYXRhIFJlbGF0aW9uc2hpcHMnLCAoKSA9PiB7XG4gIHRlc3QoJ2FsbCBzdHVkZW50X2lkcyBpbiBnYW1lcyBzaG91bGQgZXhpc3QgaW4gc3R1ZGVudHMnLCAoKSA9PiB7XG4gICAgY29uc3Qgc3R1ZGVudElkcyA9IG1vY2tTdHVkZW50cy5tYXAoKHM6IGFueSkgPT4gcy5zdHVkZW50X2lkKTtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudElkcykudG9Db250YWluKGdhbWUuc3R1ZGVudF9pZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCB0ZWFjaGVyX2lkcyBpbiBzdHVkZW50cyBzaG91bGQgZXhpc3QgaW4gdGVhY2hlcnMnLCAoKSA9PiB7XG4gICAgY29uc3QgdGVhY2hlcklkcyA9IG1vY2tUZWFjaGVycy5tYXAoKHQ6IGFueSkgPT4gdC50ZWFjaGVyX2lkKTtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3QodGVhY2hlcklkcykudG9Db250YWluKHN0dWRlbnQudGVhY2hlcl9pZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCB0ZWFjaGVyX2lkcyBpbiBnYW1lcyBzaG91bGQgZXhpc3QgaW4gdGVhY2hlcnMnLCAoKSA9PiB7XG4gICAgY29uc3QgdGVhY2hlcklkcyA9IG1vY2tUZWFjaGVycy5tYXAoKHQ6IGFueSkgPT4gdC50ZWFjaGVyX2lkKTtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QodGVhY2hlcklkcykudG9Db250YWluKGdhbWUudGVhY2hlcl9pZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2VhY2ggc3R1ZGVudCBzaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgZ2FtZScsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBjb25zdCBzdHVkZW50R2FtZXMgPSBtb2NrR2FtZXMuZmlsdGVyKChnOiBhbnkpID0+IGcuc3R1ZGVudF9pZCA9PT0gc3R1ZGVudC5zdHVkZW50X2lkKTtcbiAgICAgIGV4cGVjdChzdHVkZW50R2FtZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=