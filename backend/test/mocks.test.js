"use strict";
/**
 * Mock Data Validation Tests
 * Ensures mock data conforms to the expected schema
 */
Object.defineProperty(exports, "__esModule", { value: true });
const mocks_1 = require("./mocks");
describe('Mock Students Data', () => {
    test('should have exactly 10 student records', () => {
        expect(mocks_1.mockStudents).toHaveLength(10);
    });
    test('all students should have required fields', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student).toHaveProperty('student_id');
            expect(student).toHaveProperty('name_1');
            expect(student).toHaveProperty('name_2');
            expect(student).toHaveProperty('marks');
            expect(student).toHaveProperty('class');
            expect(student).toHaveProperty('class_no');
            expect(student).toHaveProperty('last_login');
            expect(student).toHaveProperty('last_update');
            expect(student).toHaveProperty('teacher_id');
            expect(student).toHaveProperty('password');
        });
    });
    test('student IDs should follow STU### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('student IDs should be unique', () => {
        const ids = mocks_1.mockStudents.map((s) => s.student_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockStudents.length);
    });
    test('marks should be between 0 and 1000', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.marks).toBeGreaterThanOrEqual(0);
            expect(student.marks).toBeLessThanOrEqual(1000);
        });
    });
    test('class should be valid format (e.g., 1A, 2B)', () => {
        const validClasses = ['1A', '1B', '2A', '2B'];
        mocks_1.mockStudents.forEach((student) => {
            expect(validClasses).toContain(student.class);
        });
    });
    test('class_no should be two-digit format', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.class_no).toMatch(/^\d{2}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('last_login and last_update should be valid ISO date strings', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(new Date(student.last_login).toISOString()).toBe(student.last_login);
            expect(new Date(student.last_update).toISOString()).toBe(student.last_update);
        });
    });
    test('passwords should be properly hashed', () => {
        mocks_1.mockStudents.forEach((student) => {
            expect(student.password).toHaveLength(64); // SHA-256 produces 64 hex characters
            expect(student.password).toBe(mocks_1.MOCK_STUDENT_PASSWORD_HASH);
        });
    });
});
describe('Mock Teachers Data', () => {
    test('should have exactly 3 teacher records', () => {
        expect(mocks_1.mockTeachers).toHaveLength(3);
    });
    test('all teachers should have required fields', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher).toHaveProperty('teacher_id');
            expect(teacher).toHaveProperty('password');
            expect(teacher).toHaveProperty('responsible_class');
            expect(teacher).toHaveProperty('last_login');
            expect(teacher).toHaveProperty('is_admin');
        });
    });
    test('teacher IDs should follow TCH### pattern', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('teacher IDs should be unique', () => {
        const ids = mocks_1.mockTeachers.map((t) => t.teacher_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockTeachers.length);
    });
    test('responsible_class should be an array', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(Array.isArray(teacher.responsible_class)).toBe(true);
            expect(teacher.responsible_class.length).toBeGreaterThan(0);
        });
    });
    test('is_admin should be a boolean', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(typeof teacher.is_admin).toBe('boolean');
        });
    });
    test('at least one teacher should be an admin', () => {
        const adminTeachers = mocks_1.mockTeachers.filter((t) => t.is_admin);
        expect(adminTeachers.length).toBeGreaterThan(0);
    });
    test('last_login should be valid ISO date string', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(new Date(teacher.last_login).toISOString()).toBe(teacher.last_login);
        });
    });
    test('passwords should be properly hashed', () => {
        mocks_1.mockTeachers.forEach((teacher) => {
            expect(teacher.password).toHaveLength(64); // SHA-256 produces 64 hex characters
            // Check if password is either teacher or admin hash
            const validHashes = [mocks_1.MOCK_TEACHER_PASSWORD_HASH, mocks_1.MOCK_ADMIN_PASSWORD_HASH];
            expect(validHashes).toContain(teacher.password);
        });
    });
});
describe('Mock Games Data', () => {
    test('should have exactly 20 game records', () => {
        expect(mocks_1.mockGames).toHaveLength(20);
    });
    test('all games should have required fields', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game).toHaveProperty('game_id');
            expect(game).toHaveProperty('game_name');
            expect(game).toHaveProperty('student_id');
            expect(game).toHaveProperty('subject');
            expect(game).toHaveProperty('difficulty');
            expect(game).toHaveProperty('teacher_id');
            expect(game).toHaveProperty('last_update');
            expect(game).toHaveProperty('scratch_id');
            expect(game).toHaveProperty('scratch_api');
            expect(game).toHaveProperty('accumulated_click');
        });
    });
    test('game IDs should be numeric strings', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.game_id).toMatch(/^\d+$/);
        });
    });
    test('game IDs should be unique', () => {
        const ids = mocks_1.mockGames.map((g) => g.game_id);
        const uniqueIds = new Set(ids);
        expect(uniqueIds.size).toBe(mocks_1.mockGames.length);
    });
    test('subject should be one of the valid values', () => {
        const validSubjects = [
            'Chinese Language',
            'English Language',
            'Mathematics',
            'Humanities and Science',
        ];
        mocks_1.mockGames.forEach((game) => {
            expect(validSubjects).toContain(game.subject);
        });
    });
    test('difficulty should be one of the valid values', () => {
        const validDifficulties = ['Beginner', 'Intermediate', 'Advanced'];
        mocks_1.mockGames.forEach((game) => {
            expect(validDifficulties).toContain(game.difficulty);
        });
    });
    test('student_id should follow STU### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.student_id).toMatch(/^STU\d{3}$/);
        });
    });
    test('teacher_id should follow TCH### pattern', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.teacher_id).toMatch(/^TCH\d{3}$/);
        });
    });
    test('accumulated_click should be non-negative', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.accumulated_click).toBeGreaterThanOrEqual(0);
        });
    });
    test('scratch_id should be numeric string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_id).toMatch(/^\d+$/);
        });
    });
    test('scratch_api should be valid Scratch project URL', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(game.scratch_api).toMatch(/^https:\/\/scratch\.mit\.edu\/projects\/\d+$/);
        });
    });
    test('game_id must match the last segment of scratch_api URL', () => {
        mocks_1.mockGames.forEach((game) => {
            const urlParts = game.scratch_api.split('/');
            const projectId = urlParts[urlParts.length - 1];
            expect(game.game_id).toBe(projectId);
        });
    });
    test('last_update should be valid ISO date string', () => {
        mocks_1.mockGames.forEach((game) => {
            expect(new Date(game.last_update).toISOString()).toBe(game.last_update);
        });
    });
    test('all subjects should be represented', () => {
        const subjects = mocks_1.mockGames.map((g) => g.subject);
        expect(subjects).toContain('Chinese Language');
        expect(subjects).toContain('English Language');
        expect(subjects).toContain('Mathematics');
        expect(subjects).toContain('Humanities and Science');
    });
    test('all difficulty levels should be represented', () => {
        const difficulties = mocks_1.mockGames.map((g) => g.difficulty);
        expect(difficulties).toContain('Beginner');
        expect(difficulties).toContain('Intermediate');
        expect(difficulties).toContain('Advanced');
    });
});
describe('Mock Data Relationships', () => {
    test('all student_ids in games should exist in students', () => {
        const studentIds = mocks_1.mockStudents.map((s) => s.student_id);
        mocks_1.mockGames.forEach((game) => {
            expect(studentIds).toContain(game.student_id);
        });
    });
    test('all teacher_ids in students should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockStudents.forEach((student) => {
            expect(teacherIds).toContain(student.teacher_id);
        });
    });
    test('all teacher_ids in games should exist in teachers', () => {
        const teacherIds = mocks_1.mockTeachers.map((t) => t.teacher_id);
        mocks_1.mockGames.forEach((game) => {
            expect(teacherIds).toContain(game.teacher_id);
        });
    });
    test('each student should have at least one game', () => {
        mocks_1.mockStudents.forEach((student) => {
            const studentGames = mocks_1.mockGames.filter((g) => g.student_id === student.student_id);
            expect(studentGames.length).toBeGreaterThan(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja3MudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1vY2tzLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxtQ0FPaUI7QUFFakIsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1FBQ2xELE1BQU0sQ0FBQyxvQkFBWSxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtRQUNwRCxvQkFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FB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VSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtRQUM3RCxNQUFNLFVBQVUsR0FBRyxvQkFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzlELGlCQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDOUIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7UUFDdEQsb0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNwQyxNQUFNLFlBQVksR0FBRyxpQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsS0FBSyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdkYsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2NrIERhdGEgVmFsaWRhdGlvbiBUZXN0c1xuICogRW5zdXJlcyBtb2NrIGRhdGEgY29uZm9ybXMgdG8gdGhlIGV4cGVjdGVkIHNjaGVtYVxuICovXG5cbmltcG9ydCB7XG4gIG1vY2tTdHVkZW50cyxcbiAgbW9ja1RlYWNoZXJzLFxuICBtb2NrR2FtZXMsXG4gIE1PQ0tfU1RVREVOVF9QQVNTV09SRF9IQVNILFxuICBNT0NLX1RFQUNIRVJfUEFTU1dPUkRfSEFTSCxcbiAgTU9DS19BRE1JTl9QQVNTV09SRF9IQVNILFxufSBmcm9tICcuL21vY2tzJztcblxuZGVzY3JpYmUoJ01vY2sgU3R1ZGVudHMgRGF0YScsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGhhdmUgZXhhY3RseSAxMCBzdHVkZW50IHJlY29yZHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KG1vY2tTdHVkZW50cykudG9IYXZlTGVuZ3RoKDEwKTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIHN0dWRlbnRzIHNob3VsZCBoYXZlIHJlcXVpcmVkIGZpZWxkcycsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ3N0dWRlbnRfaWQnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgnbmFtZV8xJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ25hbWVfMicpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdtYXJrcycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdjbGFzcycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdjbGFzc19ubycpO1xuICAgICAgZXhwZWN0KHN0dWRlbnQpLnRvSGF2ZVByb3BlcnR5KCdsYXN0X2xvZ2luJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ2xhc3RfdXBkYXRlJyk7XG4gICAgICBleHBlY3Qoc3R1ZGVudCkudG9IYXZlUHJvcGVydHkoJ3RlYWNoZXJfaWQnKTtcbiAgICAgIGV4cGVjdChzdHVkZW50KS50b0hhdmVQcm9wZXJ0eSgncGFzc3dvcmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc3R1ZGVudCBJRHMgc2hvdWxkIGZvbGxvdyBTVFUjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudC5zdHVkZW50X2lkKS50b01hdGNoKC9eU1RVXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzdHVkZW50IElEcyBzaG91bGQgYmUgdW5pcXVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IG1vY2tTdHVkZW50cy5tYXAoKHM6IGFueSkgPT4gcy5zdHVkZW50X2lkKTtcbiAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKG1vY2tTdHVkZW50cy5sZW5ndGgpO1xuICB9KTtcblxuICB0ZXN0KCdtYXJrcyBzaG91bGQgYmUgYmV0d2VlbiAwIGFuZCAxMDAwJywgKCkgPT4ge1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChzdHVkZW50Lm1hcmtzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0dWRlbnQubWFya3MpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NsYXNzIHNob3VsZCBiZSB2YWxpZCBmb3JtYXQgKGUuZy4sIDFBLCAyQiknLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRDbGFzc2VzID0gWycxQScsICcxQicsICcyQScsICcyQiddO1xuICAgIG1vY2tTdHVkZW50cy5mb3JFYWNoKChzdHVkZW50OiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZENsYXNzZXMpLnRvQ29udGFpbihzdHVkZW50LmNsYXNzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnY2xhc3Nfbm8gc2hvdWxkIGJlIHR3by1kaWdpdCBmb3JtYXQnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQuY2xhc3Nfbm8pLnRvTWF0Y2goL15cXGR7Mn0kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3RlYWNoZXJfaWQgc2hvdWxkIGZvbGxvdyBUQ0gjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3Qoc3R1ZGVudC50ZWFjaGVyX2lkKS50b01hdGNoKC9eVENIXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdsYXN0X2xvZ2luIGFuZCBsYXN0X3VwZGF0ZSBzaG91bGQgYmUgdmFsaWQgSVNPIGRhdGUgc3RyaW5ncycsICgpID0+IHtcbiAgICBtb2NrU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudDogYW55KSA9PiB7XG4gICAgICBleHBlY3QobmV3IERhdGUoc3R1ZGVudC5sYXN0X2xvZ2luKS50b0lTT1N0cmluZygpKS50b0JlKHN0dWRlbnQubGFzdF9sb2dpbik7XG4gICAgICBleHBlY3QobmV3IERhdGUoc3R1ZGVudC5sYXN0X3VwZGF0ZSkudG9JU09TdHJpbmcoKSkudG9CZShzdHVkZW50Lmxhc3RfdXBkYXRlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgncGFzc3dvcmRzIHNob3VsZCBiZSBwcm9wZXJseSBoYXNoZWQnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnQucGFzc3dvcmQpLnRvSGF2ZUxlbmd0aCg2NCk7IC8vIFNIQS0yNTYgcHJvZHVjZXMgNjQgaGV4IGNoYXJhY3RlcnNcbiAgICAgIGV4cGVjdChzdHVkZW50LnBhc3N3b3JkKS50b0JlKE1PQ0tfU1RVREVOVF9QQVNTV09SRF9IQVNIKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vY2sgVGVhY2hlcnMgRGF0YScsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGhhdmUgZXhhY3RseSAzIHRlYWNoZXIgcmVjb3JkcycsICgpID0+IHtcbiAgICBleHBlY3QobW9ja1RlYWNoZXJzKS50b0hhdmVMZW5ndGgoMyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCB0ZWFjaGVycyBzaG91bGQgaGF2ZSByZXF1aXJlZCBmaWVsZHMnLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXIpLnRvSGF2ZVByb3BlcnR5KCd0ZWFjaGVyX2lkJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNpYmxlX2NsYXNzJyk7XG4gICAgICBleHBlY3QodGVhY2hlcikudG9IYXZlUHJvcGVydHkoJ2xhc3RfbG9naW4nKTtcbiAgICAgIGV4cGVjdCh0ZWFjaGVyKS50b0hhdmVQcm9wZXJ0eSgnaXNfYWRtaW4nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgndGVhY2hlciBJRHMgc2hvdWxkIGZvbGxvdyBUQ0gjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodGVhY2hlci50ZWFjaGVyX2lkKS50b01hdGNoKC9eVENIXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyIElEcyBzaG91bGQgYmUgdW5pcXVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IG1vY2tUZWFjaGVycy5tYXAoKHQ6IGFueSkgPT4gdC50ZWFjaGVyX2lkKTtcbiAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKG1vY2tUZWFjaGVycy5sZW5ndGgpO1xuICB9KTtcblxuICB0ZXN0KCdyZXNwb25zaWJsZV9jbGFzcyBzaG91bGQgYmUgYW4gYXJyYXknLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodGVhY2hlci5yZXNwb25zaWJsZV9jbGFzcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodGVhY2hlci5yZXNwb25zaWJsZV9jbGFzcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnaXNfYWRtaW4gc2hvdWxkIGJlIGEgYm9vbGVhbicsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIHRlYWNoZXIuaXNfYWRtaW4pLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYXQgbGVhc3Qgb25lIHRlYWNoZXIgc2hvdWxkIGJlIGFuIGFkbWluJywgKCkgPT4ge1xuICAgIGNvbnN0IGFkbWluVGVhY2hlcnMgPSBtb2NrVGVhY2hlcnMuZmlsdGVyKCh0OiBhbnkpID0+IHQuaXNfYWRtaW4pO1xuICAgIGV4cGVjdChhZG1pblRlYWNoZXJzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICB9KTtcblxuICB0ZXN0KCdsYXN0X2xvZ2luIHNob3VsZCBiZSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgbW9ja1RlYWNoZXJzLmZvckVhY2goKHRlYWNoZXI6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KG5ldyBEYXRlKHRlYWNoZXIubGFzdF9sb2dpbikudG9JU09TdHJpbmcoKSkudG9CZSh0ZWFjaGVyLmxhc3RfbG9naW4pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdwYXNzd29yZHMgc2hvdWxkIGJlIHByb3Blcmx5IGhhc2hlZCcsICgpID0+IHtcbiAgICBtb2NrVGVhY2hlcnMuZm9yRWFjaCgodGVhY2hlcjogYW55KSA9PiB7XG4gICAgICBleHBlY3QodGVhY2hlci5wYXNzd29yZCkudG9IYXZlTGVuZ3RoKDY0KTsgLy8gU0hBLTI1NiBwcm9kdWNlcyA2NCBoZXggY2hhcmFjdGVyc1xuICAgICAgLy8gQ2hlY2sgaWYgcGFzc3dvcmQgaXMgZWl0aGVyIHRlYWNoZXIgb3IgYWRtaW4gaGFzaFxuICAgICAgY29uc3QgdmFsaWRIYXNoZXMgPSBbTU9DS19URUFDSEVSX1BBU1NXT1JEX0hBU0gsIE1PQ0tfQURNSU5fUEFTU1dPUkRfSEFTSF07XG4gICAgICBleHBlY3QodmFsaWRIYXNoZXMpLnRvQ29udGFpbih0ZWFjaGVyLnBhc3N3b3JkKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vY2sgR2FtZXMgRGF0YScsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGhhdmUgZXhhY3RseSAyMCBnYW1lIHJlY29yZHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KG1vY2tHYW1lcykudG9IYXZlTGVuZ3RoKDIwKTtcbiAgfSk7XG5cbiAgdGVzdCgnYWxsIGdhbWVzIHNob3VsZCBoYXZlIHJlcXVpcmVkIGZpZWxkcycsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ2dhbWVfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnZ2FtZV9uYW1lJyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ3N0dWRlbnRfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnc3ViamVjdCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdkaWZmaWN1bHR5Jyk7XG4gICAgICBleHBlY3QoZ2FtZSkudG9IYXZlUHJvcGVydHkoJ3RlYWNoZXJfaWQnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnbGFzdF91cGRhdGUnKTtcbiAgICAgIGV4cGVjdChnYW1lKS50b0hhdmVQcm9wZXJ0eSgnc2NyYXRjaF9pZCcpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdzY3JhdGNoX2FwaScpO1xuICAgICAgZXhwZWN0KGdhbWUpLnRvSGF2ZVByb3BlcnR5KCdhY2N1bXVsYXRlZF9jbGljaycpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdnYW1lIElEcyBzaG91bGQgYmUgbnVtZXJpYyBzdHJpbmdzJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLmdhbWVfaWQpLnRvTWF0Y2goL15cXGQrJC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdnYW1lIElEcyBzaG91bGQgYmUgdW5pcXVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGlkcyA9IG1vY2tHYW1lcy5tYXAoKGc6IGFueSkgPT4gZy5nYW1lX2lkKTtcbiAgICBjb25zdCB1bmlxdWVJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgZXhwZWN0KHVuaXF1ZUlkcy5zaXplKS50b0JlKG1vY2tHYW1lcy5sZW5ndGgpO1xuICB9KTtcblxuICB0ZXN0KCdzdWJqZWN0IHNob3VsZCBiZSBvbmUgb2YgdGhlIHZhbGlkIHZhbHVlcycsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZFN1YmplY3RzID0gW1xuICAgICAgJ0NoaW5lc2UgTGFuZ3VhZ2UnLFxuICAgICAgJ0VuZ2xpc2ggTGFuZ3VhZ2UnLFxuICAgICAgJ01hdGhlbWF0aWNzJyxcbiAgICAgICdIdW1hbml0aWVzIGFuZCBTY2llbmNlJyxcbiAgICBdO1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZFN1YmplY3RzKS50b0NvbnRhaW4oZ2FtZS5zdWJqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnZGlmZmljdWx0eSBzaG91bGQgYmUgb25lIG9mIHRoZSB2YWxpZCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWREaWZmaWN1bHRpZXMgPSBbJ0JlZ2lubmVyJywgJ0ludGVybWVkaWF0ZScsICdBZHZhbmNlZCddO1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZERpZmZpY3VsdGllcykudG9Db250YWluKGdhbWUuZGlmZmljdWx0eSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3N0dWRlbnRfaWQgc2hvdWxkIGZvbGxvdyBTVFUjIyMgcGF0dGVybicsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QoZ2FtZS5zdHVkZW50X2lkKS50b01hdGNoKC9eU1RVXFxkezN9JC8pO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCd0ZWFjaGVyX2lkIHNob3VsZCBmb2xsb3cgVENIIyMjIHBhdHRlcm4nLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUudGVhY2hlcl9pZCkudG9NYXRjaCgvXlRDSFxcZHszfSQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnYWNjdW11bGF0ZWRfY2xpY2sgc2hvdWxkIGJlIG5vbi1uZWdhdGl2ZScsICgpID0+IHtcbiAgICBtb2NrR2FtZXMuZm9yRWFjaCgoZ2FtZTogYW55KSA9PiB7XG4gICAgICBleHBlY3QoZ2FtZS5hY2N1bXVsYXRlZF9jbGljaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyYXRjaF9pZCBzaG91bGQgYmUgbnVtZXJpYyBzdHJpbmcnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KGdhbWUuc2NyYXRjaF9pZCkudG9NYXRjaCgvXlxcZCskLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmF0Y2hfYXBpIHNob3VsZCBiZSB2YWxpZCBTY3JhdGNoIHByb2plY3QgVVJMJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lLnNjcmF0Y2hfYXBpKS50b01hdGNoKC9eaHR0cHM6XFwvXFwvc2NyYXRjaFxcLm1pdFxcLmVkdVxcL3Byb2plY3RzXFwvXFxkKyQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnZ2FtZV9pZCBtdXN0IG1hdGNoIHRoZSBsYXN0IHNlZ21lbnQgb2Ygc2NyYXRjaF9hcGkgVVJMJywgKCkgPT4ge1xuICAgIG1vY2tHYW1lcy5mb3JFYWNoKChnYW1lOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHVybFBhcnRzID0gZ2FtZS5zY3JhdGNoX2FwaS5zcGxpdCgnLycpO1xuICAgICAgY29uc3QgcHJvamVjdElkID0gdXJsUGFydHNbdXJsUGFydHMubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QoZ2FtZS5nYW1lX2lkKS50b0JlKHByb2plY3RJZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2xhc3RfdXBkYXRlIHNob3VsZCBiZSB2YWxpZCBJU08gZGF0ZSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KG5ldyBEYXRlKGdhbWUubGFzdF91cGRhdGUpLnRvSVNPU3RyaW5nKCkpLnRvQmUoZ2FtZS5sYXN0X3VwZGF0ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCBzdWJqZWN0cyBzaG91bGQgYmUgcmVwcmVzZW50ZWQnLCAoKSA9PiB7XG4gICAgY29uc3Qgc3ViamVjdHMgPSBtb2NrR2FtZXMubWFwKChnOiBhbnkpID0+IGcuc3ViamVjdCk7XG4gICAgZXhwZWN0KHN1YmplY3RzKS50b0NvbnRhaW4oJ0NoaW5lc2UgTGFuZ3VhZ2UnKTtcbiAgICBleHBlY3Qoc3ViamVjdHMpLnRvQ29udGFpbignRW5nbGlzaCBMYW5ndWFnZScpO1xuICAgIGV4cGVjdChzdWJqZWN0cykudG9Db250YWluKCdNYXRoZW1hdGljcycpO1xuICAgIGV4cGVjdChzdWJqZWN0cykudG9Db250YWluKCdIdW1hbml0aWVzIGFuZCBTY2llbmNlJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2FsbCBkaWZmaWN1bHR5IGxldmVscyBzaG91bGQgYmUgcmVwcmVzZW50ZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZGlmZmljdWx0aWVzID0gbW9ja0dhbWVzLm1hcCgoZzogYW55KSA9PiBnLmRpZmZpY3VsdHkpO1xuICAgIGV4cGVjdChkaWZmaWN1bHRpZXMpLnRvQ29udGFpbignQmVnaW5uZXInKTtcbiAgICBleHBlY3QoZGlmZmljdWx0aWVzKS50b0NvbnRhaW4oJ0ludGVybWVkaWF0ZScpO1xuICAgIGV4cGVjdChkaWZmaWN1bHRpZXMpLnRvQ29udGFpbignQWR2YW5jZWQnKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vY2sgRGF0YSBSZWxhdGlvbnNoaXBzJywgKCkgPT4ge1xuICB0ZXN0KCdhbGwgc3R1ZGVudF9pZHMgaW4gZ2FtZXMgc2hvdWxkIGV4aXN0IGluIHN0dWRlbnRzJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0dWRlbnRJZHMgPSBtb2NrU3R1ZGVudHMubWFwKChzOiBhbnkpID0+IHMuc3R1ZGVudF9pZCk7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHN0dWRlbnRJZHMpLnRvQ29udGFpbihnYW1lLnN0dWRlbnRfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgdGVhY2hlcl9pZHMgaW4gc3R1ZGVudHMgc2hvdWxkIGV4aXN0IGluIHRlYWNoZXJzJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlYWNoZXJJZHMgPSBtb2NrVGVhY2hlcnMubWFwKCh0OiBhbnkpID0+IHQudGVhY2hlcl9pZCk7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXJJZHMpLnRvQ29udGFpbihzdHVkZW50LnRlYWNoZXJfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdhbGwgdGVhY2hlcl9pZHMgaW4gZ2FtZXMgc2hvdWxkIGV4aXN0IGluIHRlYWNoZXJzJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlYWNoZXJJZHMgPSBtb2NrVGVhY2hlcnMubWFwKCh0OiBhbnkpID0+IHQudGVhY2hlcl9pZCk7XG4gICAgbW9ja0dhbWVzLmZvckVhY2goKGdhbWU6IGFueSkgPT4ge1xuICAgICAgZXhwZWN0KHRlYWNoZXJJZHMpLnRvQ29udGFpbihnYW1lLnRlYWNoZXJfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdlYWNoIHN0dWRlbnQgc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGdhbWUnLCAoKSA9PiB7XG4gICAgbW9ja1N0dWRlbnRzLmZvckVhY2goKHN0dWRlbnQ6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgc3R1ZGVudEdhbWVzID0gbW9ja0dhbWVzLmZpbHRlcigoZzogYW55KSA9PiBnLnN0dWRlbnRfaWQgPT09IHN0dWRlbnQuc3R1ZGVudF9pZCk7XG4gICAgICBleHBlY3Qoc3R1ZGVudEdhbWVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19